---
description: General project overview, core principles, and multi-tenant e-commerce platform context.
globs: **/*
---
# Project Overview: Multi-Tenant E-commerce Platform

Multi-tenant e-commerce platform using MedusaJS 2.0 with multi-instance provisioning. Each merchant gets a dedicated backend and database. See `AGENTS.md` for detailed architecture.

## Core Principles

### Multi-Instance Model (Non-Negotiable)
- **NEVER** use shared-database multi-tenancy.
- Each tenant: dedicated Neon PostgreSQL database + isolated Google Cloud Run compute.
- Physical isolation required, not just logical.

### Serverless-First
- All infrastructure must be serverless (Neon, Upstash Redis, Cloud Run with \`min-instances: 0\`, Cloudflare R2).

### Technology Stack
- **Backend**: MedusaJS 2.0+ (TypeScript only)
- **Frontend**: Next.js on Cloudflare Pages
- **Database**: Neon Serverless PostgreSQL
- **Cache**: Upstash Redis
- **DNS/SSL**: Cloudflare for SaaS

## Code Organization

\`\`\`
/
├── control-plane/          # Orchestrator API (tenant provisioning)
├── tenant-instance/        # MedusaJS template/boilerplate
├── storefront/             # Next.js multi-tenant storefront
├── infrastructure/         # Infrastructure as Code
└── shared/                 # Shared utilities, types, constants
\`\`\`

## References
- **Detailed docs**: See \`AGENTS.md\` for agent architecture, responsibilities, deployment workflow.
- **Requirements**: See \`PRD.md\` for project requirements.
- **External docs**: MedusaJS 2.0, Neon API, Google Cloud Run, Cloudflare for SaaS (see \`AGENTS.md\` Resources section).
