---
description: Standards for MedusaJS 2.0, TypeScript, and API design.
globs: control-plane/**/*, tenant-instance/**/*, shared/**/*
---
# Backend Development Standards

## TypeScript
- Use TypeScript for ALL backend code (strict mode).
- Prefer interfaces over types for public APIs.
- Use async/await, avoid callbacks.

## API Design
- **Control Plane**: RESTful endpoints for tenant management.
- **Tenant API**: Standard MedusaJS REST/GraphQL.
- **Storefront**: Next.js API routes with hostname-based routing.

## Error Handling
- Use proper error types and messages.
- Log with tenant context when applicable.
- Never expose internal errors to end users.
- Implement retry logic for infrastructure operations.

## Development Workflow
1. Identify component (control-plane/tenant-instance/storefront).
2. Check tenant isolation is maintained.
3. Test with multiple tenant contexts.
4. Verify provisioning time < 2 minutes.
5. Update tests.
6. Document changes.

## Documentation and Research
- **ALWAYS** use context7 MCP (if available) for documentation searches.
- Prioritize library-specific docs for MedusaJS 2.0, Neon API, Google Cloud Run, etc.
